# Operationalizing an ML project

The aim of the project is to operationalize an Ml pipeline. We start with a bank marketing dataset, run automl process
to obtain a model with high accuracy, deploy this model as a rest endpoint with swagger enabled, enable logging for the project,
Consume and test the end point if he entire process is well implemented.

## Architectural Diagram
The diagram below explains the architecture of the project.
The process can be divided into two main parts as in a typical ML lifecycle. 
First is That of getting the data and training a model.
Second is that of getting the model and puuting it behind a rest end point for consumption. This is done using the azure container infrastructure

![Architecture diagram](https://github.com/abhijit-kalita/nd00333_AZMLND_C2/blob/master/starter_files/images/Project_Architecture.png)


## Key Steps

### Key steps in the operationalization of a machine learning process:

* A dataset is ingested which is a bank markerketing dataset provided for the project. The dataset shares details about the 
population targetted for a subscription offer and the retlated details. The dataset is created in the azure ml workspace for use

![Dataset](https://github.com/abhijit-kalita/nd00333_AZMLND_C2/blob/master/starter_files/images/Bankmktng_Dataset.png)

* In the subsequent step, using the dataset created in provious step an automl process is run with the Y/N colums regarding whether a subscription happened
as the classification prediction target

![Automl completed](https://github.com/abhijit-kalita/nd00333_AZMLND_C2/blob/master/starter_files/images/Automl_completed_exp.png)4

* Following an automl run the best model which is obtained as a result of the automl process is chosen for deployment. The deployment is to be 
made as a rest end point with teh help of an azure container instance

![Best Automl model](https://github.com/abhijit-kalita/nd00333_AZMLND_C2/blob/master/starter_files/images/Automl_Best_exp.png)

* Enabling of app insights : To better monitor the deployed model the application insignts for the deployed model has to be ebablaed.
This is done by running a puthon sccipt using azureml sdk where the the enable_app_insights is set to True. Once this is done the app insights
value can be seen as enabled in the model details

![Running of logs.py](https://github.com/abhijit-kalita/nd00333_AZMLND_C2/blob/master/starter_files/images/logs-py-run.png)

![App Insights is marked enables](https://github.com/abhijit-kalita/nd00333_AZMLND_C2/blob/master/starter_files/images/app-insights-enabled.png)


* Enable swagger for the end point: To test out the deployed model swagger utility can be used. Inorder to do this the json generated by deployed model is downloaded.
A shell script is run which downloads a docker container containing swagger and runs it locally . And finally a serve.py python file is used to serve the model .
Using this setup the swagger specific to the rest endpoint can be viewed in swagger ui served by the locally deployed swagger container.

![Swagger1](https://github.com/abhijit-kalita/nd00333_AZMLND_C2/blob/master/starter_files/images/swagger-json-serving.png)


* Consumption of deployed endpoint: 

![Rest endpoint](https://github.com/abhijit-kalita/nd00333_AZMLND_C2/blob/master/starter_files/images/pipeline-restendpoint.png)

* Test the consumption of the end point

![Rest endpoint consumption](https://github.com/abhijit-kalita/nd00333_AZMLND_C2/blob/master/starter_files/images/consume-endpoint.png)

* Pipeline execution

![Pipeline execution](https://github.com/abhijit-kalita/nd00333_AZMLND_C2/blob/master/starter_files/images/pipeline-jupyternb1.png)


![Pipeline execution2](https://github.com/abhijit-kalita/nd00333_AZMLND_C2/blob/master/starter_files/images/pipeline1.png)


## Screen Recording
[Screencast Link of Project](https://youtu.be/9Y6MumokV9Y)

## Standout Suggestions/Improvements
Some improvements which can be attemped are
Get a better model by changing/optimizing the automl run
Automate a scheduled test of the rest end point to check if the performance degrades and launch a retraining based on that


